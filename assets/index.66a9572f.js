var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;import{r as a,B as c,I as l,a as m}from"./vendor.67db4939.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const r=new URL(e,location),o=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,a)=>{const c=new URL(e,r);if(self[t].moduleMap[c])return n(self[t].moduleMap[c]);const l=new Blob([`import * as m from '${c}';`,`${t}.moduleMap['${c}']=m;`],{type:"text/javascript"}),m=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){a(new Error(`Failed to import: ${e}`)),o(m)},onload(){n(self[t].moduleMap[c]),o(m)}});document.head.appendChild(m)})),self[t].moduleMap={}}}("/LuBan/assets/");const i=function(){const e={},a=[];return{componentMap:e,componentArray:a,registryComponent:function(c,l){if(e[c]){const t=a.indexOf(e[c]);a.splice(t,1)}const m=((e,a)=>{for(var c in a||(a={}))t.call(a,c)&&o(e,c,a[c]);if(n)for(var c of n(a))r.call(a,c)&&o(e,c,a[c]);return e})({key:c},l);a.push(m),e[c]=m}}}();i.registryComponent("text",{name:"文本",preview:()=>a.createElement("span",null,"预览文本"),render:()=>a.createElement("span",null,"预览文本")}),i.registryComponent("button",{name:"按钮",preview:()=>a.createElement(c,{type:"primary"},"预览按钮"),render:()=>a.createElement(c,{type:"primary"},"预览按钮")}),i.registryComponent("input",{name:"输入框",preview:()=>a.createElement(l,null),render:()=>a.createElement(l,null)});const s=e=>{const{block:t,config:n}=e,r=a.useMemo((()=>({top:`${t.top}px`,left:`${t.left}px`})),[t.left,t.top]),o=n.componentMap[t.componentKey];let c;return o&&(c=o.render()),a.createElement("div",{className:"editor-block",style:r},c)};const p=e=>{const{config:t,value:n}=e,r=a.useMemo((()=>({width:n.container.width,height:n.container.height})),[n.container.height,n.container.width]);return a.createElement("div",{className:"editor"},a.createElement("div",{className:"editor-menu"},t.componentArray.map(((e,t)=>a.createElement("div",{className:"editor-menu-item",key:t},a.createElement("div",{className:"editor-menu-item-name"},e.name),e.preview())))),a.createElement("div",{className:"editor-head"},"head"),a.createElement("div",{className:"editor-operator"},"operator"),a.createElement("div",{className:"editor-body"},a.createElement("div",{className:"editor-container",style:r},n.blocks.map(((e,n)=>a.createElement(s,{key:n,block:e,config:t}))))))};function d(){const[e,t]=a.useState({container:{height:700,width:1e3},blocks:[{componentKey:"text",top:100,left:100},{componentKey:"button",top:200,left:200},{componentKey:"input",top:300,left:300}]});return a.createElement("div",{className:"app-home"},a.createElement(p,{value:e,config:i,onChange:t}))}m.render(a.createElement(a.StrictMode,null,a.createElement(d,null)),document.getElementById("root"));
